<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Overlap</title>
	<style>

	/*-------------------------------------
	| grid
	-------------------------------------*/

	.grid {
		position: relative;
		margin: 0 auto;
		width: 520px; height: 520px;
		padding: 0;
	}

	.player {
		width: 550px;
		margin: 0 auto;
	}

	.snap {
		width: 500px;
		height: 500px;
		position: absolute;
		top: 8px; left: 8px;
		border: solid 1px red;
	}

	.block {
		width: 50px; height: 50px;;
		float: left;
		border-style: solid;
		border-width: 1px;
		border-color: blue;
		border-radius: 1px;
	}

	.water { width: 100%;}

	.occupied { opacity: .5;}

	/*-------------------------------------
	| ship
	-------------------------------------*/

	.horizontal {
		background: url('./assets/images/ship1.png');
		background-size: contain;
		border: solid 1px red;
		width: 185px; height: 30px;
		z-index: 10; /* on top of grid -------------------------------*/
	}

	.vertical {
		background: url('./assets/images/ship1-rotate.png');
		background-size: contain;
		border: solid 1px red;
		width: 30px; height: 185px;
		z-index: 10;
	}

	</style>
</head>
<body>

	<h1 id="confirm">Start!</h1>

	<div class="grid">
		<div class="player"></div>
		<div class="snap"></div>
	</div>

	<div id="ship1" class="ship horizontal"></div>
	<div id="ship2" class="ship horizontal"></div>
	<div id="ship3" class="ship horizontal"></div>
	<div id="ship4" class="ship horizontal"></div>
	<div id="ship5" class="ship horizontal"></div>

	<div id="result"></div>

	<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
	<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>

	<script>

	$(document).ready(function() {

	/*-------------------------------------
	| global var
	-------------------------------------*/

	var shipId;

	var xAxis = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    var yAxis = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];

    var playerGrid = xAxis.length * yAxis.length;

	/*-------------------------------------
	| print grid
	-------------------------------------*/

	for (var i = 0; i < playerGrid; i++) {
		var div = $("<div>");
		var img = $("<img>");
		var imgSrc = "./assets/images/waterTile.jpg";
		var optImg = "./assets/images/waterTile.jpg";
		img.addClass("water");
		img.attr("src", imgSrc);
		// img.attr("data", [i]);
		img.attr("option", );
		div.addClass('block');
		div.attr('id','block'+[i]);

		div.append(img);
		$(".player").append(div);
	}

	$(".waterTile").on("click", function() {
		var src = $(this).attr("src");
		var optImg = $(this).attr("optImg");
		$(this).attr("data", optImg.replace(optImg, src));
		$(this).attr("src", src.replace(src, optImg));

	})

	/*-------------------------------------
	| place and confirm
	-------------------------------------*/

	$('.ship').draggable({ grid: [ 52, 52 ], snap: ".snap" });

	$('#confirm').on('click', function(){

		for(var i=1; i< 6; i++){
			shipId = 'ship'+i;

			for(var j = 0; j < playerGrid; j++){
				var blockId = 'block' + [j];
				overlap(blockId);
			}
		}
	});

	/*-------------------------------------
	| check overlap
	-------------------------------------*/

	function overlap(blockId) {
		var x1 = $('#'+blockId).offset().left;
		var y1 = $('#'+blockId).offset().top;
		var h1 = $('#'+blockId).outerHeight(true);
		var w1 = $('#'+blockId).outerWidth(true);
		var b1 = y1 + h1;
		var r1 = x1 + w1;

		var x2 = $('#'+shipId).offset().left;
		var y2 = $('#'+shipId).offset().top;
		var h2 = $('#'+shipId).outerHeight(true);
		var w2 = $('#'+shipId).outerWidth(true);

		var b2 = y2 + h2;
		var r2 = x2 + w2;

		if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) {
			// $('#'+blockId).removeClass('occupied');
		} else {
			$('#'+blockId).addClass('occupied');
		}

	}

	/*-------------------------------------
	| rotate
	-------------------------------------*/

	$('.ship').on('click', function(){
		$(this).toggleClass('vertical');
		$(this).toggleClass('horizontal');
	});

	}); //document.ready close

	</script>
</body>
</html>